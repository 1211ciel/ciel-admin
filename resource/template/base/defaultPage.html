<!DOCTYPE html>
<html lang="zh">
{{include "/base/meta.html" .}}
<body>
{{include "/base/nav.html" .}}
<!--header-->
<header class="w hr">
    <h1>{{.c.PageTitle}}</h1>
    <form method="get" action="{{.c.UrlPrefix}}/list" id="search">
        <section>
            <ul>
                <input type="hidden" name="page" value="{{.Query.page}}">
                <input type="hidden" name="size" value="{{.Query.size}}">
                {{range .c.Fields}}
                {{if .Search}}
                {{formli . $.Query}}
                {{end}}
                {{end}}
            </ul>

        </section>
        <section>
            <ul>
                <input type="button" value="Search" onclick="$('#search').submit()">
                <input type="button" value="Add" onclick="showDetails(1)">
            </ul>
        </section>
        {{include "/base/msg.html" .}}
    </form>
</header>
<!--table data-->
<main class="w hr part">
    <table>
        <tr>
            {{range .c.Fields}}
            {{th .}}
            {{end}}
            <th>ACTIONS</th>
        </tr>
        {{range $dataMap :=.list}}
        <tr>
            {{range $field :=$.c.Fields}}
            {{td $field $dataMap}}
            {{end}}
            <td>
                <input type="button" value="Edit" onclick="showDetails(0,'{{$.c.UrlPrefix}}/getById?id={{.id}}')" {{if $.c.NoEdit}} hidden {{end}}>
                <input type="button" value="Del" id="del-btn" onclick="onDel('{{.id}}','{{$.c.UrlPrefix}}/del')">
            </td>
        </tr>
        {{end}}
    </table>
    {{include "/base/page.html" .}}
</main>
<!--update or add -->
<form class="w hr part details" id="post-form" hidden>
    <h2>Step1 Set info</h2>
    <section>
        <ul>
            <input type="hidden" name="add" value="{{.Query.add}}">
            <input type="hidden" name="id" value="{{.data.id}}">
            {{range .c.Fields}}
            {{formli .}}
            {{end}}
        </ul>
    </section>
    <h2>Step2 Go!</h2>
    <p>Please wait! submit need some times</p>
    <input type="button" value="Back" onclick="showMain()">
    <input type="button" value="Submit" id="submit-btn" onclick="onSubmitDetails('{{.c.UrlPrefix}}/post','{{.c.UrlPrefix}}/put',$('#post-form').serialize())">
</form>
</body>
{{include "/base/footer.html" .}}
</html>