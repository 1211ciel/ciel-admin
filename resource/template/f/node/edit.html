<!--
=================================================================================
 This is auto-generated by FreeKey Admin at 2022-07-05 19:17:03. For more information see https://github.com/1211ciel/ciel-admin
=================================================================================
-->
<!DOCTYPE html>
<html lang="zh">
<head>
    {{include "/part/meta.html" .}}
    <title>修改记事本 - {{.Config.server.name}}</title>
</head>
<body>
{{include "/part/top.html" .}}
<div id="wrapper" v-cloak>
    <div class="w">
        <div id="wrapper-left">
            <div class="box no-bottom-border">
                <div class="cell flex-center">
                    <img src="/resource/image/settings.png" alt="Settings" width="62" height="62">
                    <a class="ml-12" href="/node/path?{{toUrlParams .Query}}">
                        <i class="fa fa-hand-o-left"> 返回</i>
                    </a>
                </div>
                {{.msg}}
                <div class="cell"><a class="link-2 link-2-active" href="#">记事本</a>
                    <a class="link-2" href="/node/path/add?{{toUrlParams .Query}}">添加新笔记</a>
                </div>
                <div class="cell">
                    {{if eq .Session.node_edit.level 1}} <span class='tag-info'>普通</span>{{end}}
                    {{if eq .Session.node_edit.level 2}}<span class='tag-success'>稀有</span>{{end}}
                    {{if eq .Session.node_edit.level 3}}<span class='tag-primary'>传承</span>{{end}}
                    {{if eq .Session.node_edit.level 4}}<span class='tag-warning'>唯一</span>{{end}}
                    {{if eq .Session.node_edit.level 5}}<span class='tag-brown'>史诗</span>{{end}}
                    {{if eq .Session.node_edit.level 6}}<span class='tag-purple'>传说</span>{{end}}
                    {{if eq .Session.node_edit.level 7}}<span class='tag-danger'>神话</span>{{end}}
                    {{concat .Session.node_edit.year "年"}}
                    {{concat .Session.node_edit.month "月"}}
                    {{concat .Session.node_edit.day "日"}}
                    {{if .Session.node_edit.tag}}
                    <span class="tag-info">{{.Session.node_edit.tag}}</span>
                    {{end}}
                </div>
                <div class="cell-content">
                    {{.Session.node_edit.summary}}
                </div>
                {{if .Session.node_edit.main_things}}
                <div class="cell-content">
                    {{.Session.node_edit.main_things}}
                </div>
                {{end}}
                <div class="cell btn">
                    <button class="btn-info mr-12" onclick="showEdit()">编辑</button>
                    <button class="btn-info" onclick="if(confirm('确认删除?')){location.href='/node/path/del/{{.Session.node_edit.id}}?{{toUrlParams .Query}}'}">删除</button>
                </div>
                <form id="form" style="display: none" class="cell" method="post" action="/node/put?{{toUrlParams .Query}}">
                    <table class="table-add" cellspacing="5" cellpadding="0" border="0">
                        <input name='uid' value='{{.Session.node_edit.uid}}' hidden>
                        <tr>
                            <td width="160" align="right">ID</td>
                            <td align="left"><input name="id" readonly value="{{.Session.node_edit.id}}"></td>
                        </tr>
                        <tr>
                            <td width="160" align="right">日期</td>
                            <td width="auto" align="left">
                                <input class="w-80 text-right" name='year' value='{{.Session.node_edit.year}}'> 年
                                <input class="w-80 text-right" name='month' value='{{.Session.node_edit.month}}'>月
                                <input class="w-80 text-right" name='day' value='{{.Session.node_edit.day}}'>日
                            </td>
                        </tr>
                        <tr>
                            <td align='right'>分类</td>
                            <td><select name='category' class="tag-info">
                                {{range .category}}
                                <option value='{{.value}}' {{if eq $.Session.node_edit.category .value}} selected {{end}} class='tag-info'>{{.label}}</option>
                                {{end}}
                            </select></td>
                        </tr>
                        <tr>
                            <td align='right'>等级</td>
                            <td><select v-model="level" name='level' :class="[cLevel]">
                                <option :value='1' {{if eq .Session.node_edit.level 1}} selected {{end}} class='tag-info'>普通</option>
                                <option :value='2' {{if eq .Session.node_edit.level 2}} selected {{end}} class='tag-success'>稀有</option>
                                <option :value='3' {{if eq .Session.node_edit.level 3}} selected {{end}} class='tag-primary'>传承</option>
                                <option :value='4' {{if eq .Session.node_edit.level 4}} selected {{end}} class='tag-warning'>唯一</option>
                                <option :value='5' {{if eq .Session.node_edit.level 5}} selected {{end}} class='tag-brown'>史诗</option>
                                <option :value='6' {{if eq .Session.node_edit.level 6}} selected {{end}} class='tag-purple'>传说</option>
                                <option :value='7' {{if eq .Session.node_edit.level 7}} selected {{end}} class='tag-danger'>神话</option>
                            </select></td>
                        </tr>
                        <tr>
                            <td width='160' align='right'>标签</td>
                            <td width='auto' align='left'><input name='tag' value='{{.Session.node_edit.tag}}'></td>
                        </tr>
                        <tr>
                            <td width='160' align='right'>概括</td>
                            <td width='auto' align='left'><textarea name='summary' required style="width: 548px; height: 103px;">{{.Session.node_edit.summary}}</textarea></td>
                        </tr>
                        <tr>
                            <td width='160' align='right'>内容</td>
                            <td width='auto' align='left'><textarea name='main_things' style="width: 880px; height: 346px;">{{.Session.node_edit.main_things}}</textarea></td>
                        </tr>
                        <tr>
                            <td width='160' align='right'>备注信息</td>
                            <td width='auto' align='left'><textarea name='other_info' style="width: 299px; height: 124px;">{{.Session.node_edit.other_info}}</textarea></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>
                                <button class="btn-info mr-12" type="button" onclick="showEdit()">预览</button>
                                <button class="btn-info" type="submit">提交</button>
                            </td>
                        </tr>
                    </table>
                </form>
            </div>
        </div>
    </div>
</div>
{{include "/part/footer.html" .}}
{{include "/part/endJs.html" .}}
<script src="/resource/js/vue.js"></script>
<script>
    function showEdit() {
        $(".cell-content").toggle()
        $(".btn").toggle()
        $("form").toggle()
    }

    Vue.createApp({
        data() {
            return {
                level: '{{.Session.node_edit.level}}'
            }
        },
        computed: {
            cLevel: function () {
                switch (+this.level) {
                    case 1:
                        return "tag-info"
                    case 2:
                        return "tag-success"
                    case 3:
                        return "tag-primary"
                    case 4:
                        return "tag-warning"
                    case 5:
                        return "tag-brown"
                    case 6:
                        return "tag-purple"
                    case 7:
                        return "tag-danger"
                }
            }
        }
    }).mount("#wrapper")
</script>
</body>
</html>