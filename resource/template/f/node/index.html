<!--
=================================================================================
 This is auto-generated by FreeKey Admin at 2022-07-05 19:17:03. For more information see https://github.com/1211ciel/ciel-admin
=================================================================================
-->
<!DOCTYPE html>
<html lang="zh">
<head>
    {{include "/part/meta.html" .}} <title>{{.node.Name}} - {{.Config.server.name}} </title>
    <style>
        .tag-info, .tag-primary, .tag-warning, .tag-success, .tag-brown, .tag-purple, .tag-danger {
            white-space: nowrap !important;
        }

        .time {
            display: inline-flex
        }
    </style>
</head>
<body>
{{include "/part/top.html" .}}
<div id="wrapper">
    <div class="w">
        <div id="wrapper-left">
            {{include "/part/nav.html" .}}
            <div class="box no-bottom-border">
                {{include "/part/page_base_info.html" .}}
                <form id="searchForm" class="cell flex-center no-bottom-border" action="{{.node.Path}}" method="get">
                    <a class="tag-info mr-3" href="{{.node.Path}}/add?{{toUrlParams .Query}}"> <i class="fa fa-plus" aria-hidden="true"></i></a>
                    <input id="page" name="page" value="1" hidden> <input name="size" value="{{.Query.size}}" hidden>
                    <input id="node_category" name="node_category" value="{{.Session.node_category}}" hidden>
                    <input id="node_level" name="node_level" value="{{.Session.node_level}}" hidden>
                    <label class="input">年
                        <input list="year" type="text" name="node_year" value="{{.Session.node_year}}" onkeydown="if(event.keyCode===13)this.form.submit()">
                        <datalist id="year">
                            <option value="">请选择</option>
                            <option v-for="i in 2023" :value="i" v-text="i"></option>
                        </datalist>
                    </label>
                    <label class="input">月
                        <input list="month" type="text" name="node_month" value="{{.Session.node_month}}" onkeydown="if(event.keyCode===13)this.form.submit()">
                        <datalist id="month">
                            <option value="">请选择</option>
                            <option v-for="i in 12" :value="i" v-text="i"></option>
                        </datalist>
                    </label>
                    <label class="input">日
                        <input list="day" type="text" name="node_day" value="{{.Session.node_day}}" onkeydown="if(event.keyCode===13)this.form.submit()">
                        <datalist id="day">
                            <option value="">请选择</option>
                            <option v-for="i in 31" :value="i" v-text="i"></option>
                        </datalist>
                    </label>
                    <label class="input">概括 <input type="text" name="node_summary" value="{{.Session.node_summary}}" onkeydown="if(event.keyCode===13)this.form.submit()"></label>
                    <label class="input">标签 <input type="text" name="node_tag" value="{{.Session.node_tag}}" onkeydown="if(event.keyCode===13)this.form.submit()"></label>
                </form>
            </div>
            <div class="box no-bottom-border">
                {{.msg}}
                <div class="cell category">
                    <a href="#" class="tag-info" data="" onclick="$('#node_category').val($(this).attr('data')).parent().submit()">全部</a>
                    {{range .category}}
                    <a href="#" class="tag-info" data="{{.value}}" onclick="$('#node_category').val($(this).attr('data')).parent().submit()">{{.label}}</a>
                    {{end}}
                </div>
                <div class="cell level">
                    <a href="#" class="tag-info" data="" onclick="$('#node_level').val($(this).attr('data')).parent().submit()">全部</a>
                    <a href="#" class="tag-info" data="1" onclick="$('#node_level').val($(this).attr('data')).parent().submit()">普通</a>
                    <a href="#" class="tag-success" data="2" onclick="$('#node_level').val($(this).attr('data')).parent().submit()">稀有</a>
                    <a href="#" class="tag-primary" data="3" onclick="$('#node_level').val($(this).attr('data')).parent().submit()">传承</a>
                    <a href="#" class="tag-warning" data="4" onclick="$('#node_level').val($(this).attr('data')).parent().submit()">唯一</a>
                    <a href="#" class="tag-brown" data="5" onclick="$('#node_level').val($(this).attr('data')).parent().submit()">史诗</a>
                    <a href="#" class="tag-purple" data="6" onclick="$('#node_level').val($(this).attr('data')).parent().submit()">传说</a>
                    <a href="#" class="tag-danger" data="7" onclick="$('#node_level').val($(this).attr('data')).parent().submit()">神话</a>
                </div>
                <div>
                    <div class="cell">
                        <table id="data">
                            {{range $index,$i :=.list}}
                            <tr>
                                <td>{{nodeLevel $i.level}}</td>
                                <td>{{tag 1 $i.tag}}</td>
                                <td class="time">{{nodeTime $i.year $i.month $i.day}}</td>
                                <td>{{nodeWeek $i.year $i.month $i.day}}</td>
                                <td href='{{$.node.Path}}/edit/{{$i.id}}?{{toUrlParams $.Query}}'>
                                    <p class="link-4 text-max-width-633" onclick='location.href="{{$.node.Path}}/edit/{{$i.id}}?{{toUrlParams $.Query}}"'>{{$i.summary|html}}</p>
                                </td>
                            </tr>
                            {{end}}
                        </table>
                    </div>
                    {{include "/part/pagination.html" .}}
                </div>
            </div>
        </div>
    </div>
</div>
{{include "/part/footer.html" .}}
{{include "/part/endJs.html" .}}
<script>
    // 分类列表 添加默认选中
    $(".category a[data='{{.Session.node_category}}']").addClass('tag-danger')
</script>
</body>
</html>