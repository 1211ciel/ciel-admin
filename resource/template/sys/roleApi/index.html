<!--
=================================================================================
 This is auto-generated by FreeKey Admin at 2022-06-27 19:10:03. For more information see https://github.com/1211ciel/ciel-admin
=================================================================================
-->
<!DOCTYPE html>
<html lang="zh">
<head>
    {{include "/part/meta.html" .}} <title>{{.node.Name}} - {{.Config.server.name}} </title>
</head>
<body>
{{include "/part/top.html" .}}
<div id="wrapper">
    <div class="w">
        <div id="wrapper-left">
            <div class="box no-bottom-border">
                {{include "/part/page_base_info.html" .}}
                <form id="searchForm" class="cell flex-center no-bottom-border" action="{{.node.Path}}" method="get">
                    <a href="/role/path" class="tag-info mr-3">back</a>
                    <a class="tag-info" href="{{.node.Path}}/add?{{toUrlParams .Query}}"> <i class="fa fa-plus" aria-hidden="true"></i></a>
                    <a href="#" class="tag-danger ml-3" onclick="clearRoleApi()">清空</a>
                    <input id="page" name="page" value="1" hidden> <input name="size" value="{{.Query.size}}" hidden>
                </form>
            </div>
            <div class="box no-bottom-border">
                {{.msg}}
                <table class="table-1">
                    <tr>
                        <th>id</th>
                        <th>角色</th>
                        <th>分组</th>
                        <th>URL</th>
                        <th>方法</th>
                        <th>说明</th>
                        <th>操作</th>
                    </tr>
                    {{range .list}}
                    <tr>
                        <td>{{.id}}</td>
                        <td>{{.r_name}}</td>
                        <td>{{.group}}</td>
                        <td>{{.url}}</td>
                        <td>{{if eq .method 1}} <span class="tag-info">GET</span>
                            {{else if eq .method 2}} <span class="tag-primary">POST</span>
                            {{else if eq .method 3}} <span class="tag-warning">PUT</span>
                            {{else}} <span class="tag-danger">DELETE</span> {{end}}
                        </td>
                        <td>{{.desc}}</td>
                        <td align="center">
                            <a href="#" onclick="if(confirm('确认删除?')){location.href='{{$.node.Path}}/del/{{.id}}?{{toUrlParams $.Query}}'}" class="tag-danger"><i class="fa fa-trash"></i></a>
                        </td>
                    </tr>
                    {{end}}
                </table>
                {{include "/part/pagination.html" .}}
            </div>
        </div>
    </div>
</div>
{{include "/part/footer.html" .}}
{{include "/part/endJs.html" .}}
</body>
<script>
    async function clearRoleApi() {
        if (confirm('确认清空？')) {
            let rid = '{{.Query.rid}}'
            if (!rid) {
                rid = prompt('请输入角色id')
                if (!rid) {
                    return
                }
            }
            let res = await $.get("/roleApi/clear/" + rid)
            if (res.code === 0) {
                location.reload()
            } else {
                alert(res.msg)
            }
        }
    }
</script>
</html>